<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Box Manager - Beta</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" />
  <meta name="theme-color" content="#2563eb" />
  <link rel="stylesheet" href="style.css" />

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('service-worker.js')
          .then((reg) => console.log('Service Worker registrado:', reg.scope))
          .catch((err) => console.error('Error en el SW:', err));
      });
    }
  </script>
</head>
  <!-- Firebase SDKs -->
<script type="module">
  // Importa las funciones desde Firebase CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_DOMINIO.firebaseapp.com",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_PROJECT_ID.appspot.com",
    messagingSenderId: "TU_SENDER_ID",
    appId: "TU_APP_ID"
  };

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Ejemplo: Registrar usuario
  const signupForm = document.getElementById("signup-form");
  if (signupForm) {
    signupForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = e.target["signup-email"].value;
      const password = e.target["signup-password"].value;

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        alert("Usuario creado: " + userCredential.user.email);
      } catch (error) {
        alert("Error: " + error.message);
      }
    });
  }

  // Ejemplo: Guardar datos en Firestore
  const addDataButton = document.getElementById("add-data-btn");
  if (addDataButton) {
    addDataButton.addEventListener("click", async () => {
      try {
        await addDoc(collection(db, "asistencia"), {
          nombre: "Juan",
          fecha: new Date()
        });
        alert("Asistencia guardada");
      } catch (e) {
        alert("Error guardando asistencia: " + e.message);
      }
    });
  }
  <h2>Iniciar sesión</h2>
<form id="login-form">
  <input type="email" id="login-email" placeholder="Correo electrónico" required />
  <input type="password" id="login-password" placeholder="Contraseña" required />
  <button type="submit">Entrar</button>
</form>

<div id="login-result"></div>

</script>

<body>
  <header>
    <h1>Box Manager - Beta</h1>
  </header>

  <nav>
    <a href="#usuarios">Usuarios</a>
    <a href="#pagos">Pagos</a>
    <a href="#asistencia">Asistencia</a>
    <a href="#rutinas">Rutinas</a>
    <a href="#dashboard">Dashboard</a>
  </nav>

  <main>
    <section id="usuarios" class="card">
      <h2>Registro de Usuario</h2>
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" placeholder="Nombre completo" />
      <label for="correo">Correo:</label>
      <input type="email" id="correo" placeholder="Correo electrónico" />
      <label for="telefono">Teléfono:</label>
      <input type="tel" id="telefono" placeholder="Número telefónico" />
      <button onclick="alert('Usuario registrado (demo)')">Registrar</button>
    </section>

    <section id="pagos" class="card">
      <h2>Registro de Pago</h2>
      <label for="usuarioPago">Usuario:</label>
      <input type="text" id="usuarioPago" placeholder="Nombre del usuario" />
      <label for="monto">Monto:</label>
      <input type="number" id="monto" placeholder="$" />
      <button onclick="alert('Pago registrado (demo)')">Registrar Pago</button>
    </section>

    <section id="asistencia" class="card">
      <h2>Asistencia</h2>
      <label for="usuarioAsistencia">Usuario:</label>
      <input type="text" id="usuarioAsistencia" placeholder="Nombre del usuario" />
      <button onclick="alert('Asistencia marcada (demo)')">Registrar Asistencia</button>
    </section>

    <section id="rutinas" class="card">
      <h2>Publicar Rutina</h2>
      <label for="tituloRutina">Título:</label>
      <input type="text" id="tituloRutina" placeholder="WOD del día" />
      <label for="detalleRutina">Detalles:</label>
      <input type="text" id="detalleRutina" placeholder="Ej: AMRAP 20 min..." /><br />
      <button onclick="alert('Rutina publicada (demo)')">Publicar Rutina</button>
    </section>

    <section id="dashboard" class="card">
      <h2>Dashboard (Demo)</h2>
      <p>Usuarios activos: <strong>12</strong></p>
      <p>Pagos del mes: <strong>$6,000</strong></p>
      <p>Clases reservadas hoy: <strong>8</strong></p>
    </section>
  </main>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "TU_API_KEY",
    authDomain: "TU_DOMINIO.firebaseapp.com",
    projectId: "TU_PROJECT_ID",
    storageBucket: "TU_PROJECT_ID.appspot.com",
    messagingSenderId: "TU_SENDER_ID",
    appId: "TU_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginForm = document.getElementById("login-form");
  const result = document.getElementById("login-result");

  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;

    try {
      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      result.innerText = "Bienvenido: " + userCredential.user.email;
      // Aquí puedes redirigir a otra página si quieres
      // window.location.href = "dashboard.html";
    } catch (error) {
      result.innerText = "Error: " + error.message;
    }
  });
</script>

</body>
</html>
